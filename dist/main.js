(()=>{function e(e,t){if(sectionHeader=t.querySelector(".section-header"),!sectionHeader.contains(e.target)||sectionHeader===e.target){document.addEventListener("mousemove",n),document.addEventListener("mouseup",(function e(a){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",n),r=document.elementsFromPoint(a.clientX,a.clientY);for(var o=0;o<r.length;o++){if("section"===(l=r[o]).className){var c=l.parentElement;return a.clientY>s?c.insertBefore(t,l.nextSibling):c.insertBefore(t,l),t.style.transform=null,void t.classList.toggle("dragging")}if("add-section"===l.className)return(c=l.parentElement).insertBefore(t,l),t.style.transform=null,void t.classList.toggle("dragging")}var r=document.elementsFromPoint(a.clientX,a.clientY-25);for(o=0;o<r.length;o++)if("section"===(l=r[o]).className)return(c=l.parentElement).insertBefore(t,l.nextSibling),t.style.transform=null,void t.classList.toggle("dragging");for(r=document.elementsFromPoint(a.clientX,a.clientY+25),o=0;o<r.length;o++)if("section"===(l=r[o]).className||"add-section"===l.className)return(c=l.parentElement).insertBefore(t,l),t.style.transform=null,void t.classList.toggle("dragging");for(r=document.elementsFromPoint(a.clientX,a.clientY),o=0;o<r.length;o++){var l;"col"!==(l=r[o]).className||l.contains(t)||l.insertBefore(t,l.querySelector(".add-section"))}t.style.transform=null,t.classList.toggle("dragging")}));const s=e.clientY;let a=0,o=0;function n(e){t.classList.toggle("dragging"),e.preventDefault(),a+=e.movementX,o+=e.movementY,t.style.transform=`translate(${a}px, ${o}px)`}}}function t(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}function n(t){const n=t.querySelector(".new-section-input");t.addEventListener("click",(()=>{n.focus()})),n.addEventListener("focusin",(()=>{t.style.opacity="1",t.style.cursor="text"})),n.addEventListener("focusout",(()=>{t.style.opacity="0.5",t.style.cursor="pointer"})),n.addEventListener("keydown",(t=>{if("Enter"===t.code&&""!==n.value){var c=s(n.value);o.push(c),function(t){const n=o.length-1,s=document.createElement("div");s.className="section",s.dataset.sec=n;const c=document.createElement("div"),r=document.createElement("img");r.src="../images/dots-vertical.svg",r.style.width="20px",r.className="triple-dot";const l=document.createElement("div");l.className="drop-down",l.dataset.sec=n;const i=document.createElement("div");i.textContent="Delete",i.addEventListener("click",(()=>{o.splice(n,1);const e=document.querySelector("[data-sec="+CSS.escape(n)+"]");e.querySelector(".section-container").style.opacity="0",e.style.maxHeight="0px",e.style.fontSize="0px",setTimeout((function(){e.remove()}),400)})),l.appendChild(i),c.appendChild(r),c.appendChild(l),c.style.cursor="pointer";const d=document.createElement("div");d.className="section-container",d.dataset.sec=o.length-1;const m=document.createElement("div");m.textContent=o[n].header,m.className="section-header",m.appendChild(c),m.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),m.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),m.addEventListener("mousedown",(t=>{e(t,s)}));const u=document.createElement("div");u.className="add-task",u.innerHTML='<img src="../images/plus.svg" width="20px" height="20px">',u.addEventListener("click",(()=>{document.querySelector("#add-task-dialog").showModal(),document.addEventListener("keydown",(function e(t){"Enter"===t.code&&(function(e){const t=document.querySelector("#add-task-dialog"),n=t.querySelector("#task-name"),s=t.querySelector("#task-due"),c=t.querySelector("#task-desc"),r=a(n.value,s.value,c.value);n.value=null,s.value=null,c.value=null,o[e].tasks.push(r),function(e,t){const n=o[t].tasks.length-1,s=document.createElement("div");s.className="task",s.textContent=e.name,s.dataset.sec=t,s.dataset.task=n,s.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),s.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"}));const a=document.createElement("div"),c=document.createElement("div");c.className="drop-down";const r=document.createElement("div");r.textContent="Delete",c.dataset.sec=t,c.dataset.task=n,r.addEventListener("click",(()=>{o[t].removeTask(e);var s=document.querySelector("[data-sec="+CSS.escape(t)+"][data-task="+CSS.escape(n)+"]");s.children[0].style.display="none",s.style.maxHeight="0px",s.style.opacity="0",s.style.fontSize="0",s.style.padding="0",setTimeout((function(){s.remove()}),300)}));const l=document.createElement("img");l.src="../images/dots-vertical.svg",l.style.width="20px",l.className="triple-dot",c.appendChild(r),a.appendChild(l),a.appendChild(c),s.appendChild(a);const i=document.querySelector("[data-sec="+CSS.escape(t)+"] .section-container"),d=i.querySelector(".add-task");i.insertBefore(s,d)}(r,e),t.close()}(n),document.removeEventListener("keydown",e))}))}));const p=document.createElement("div");p.textContent="Add Task",p.style.fontSize="14px",u.appendChild(p),d.appendChild(m),d.appendChild(u),s.appendChild(d);const v=document.querySelector("[data-col="+CSS.escape(t)+"]"),g=v.querySelector(".add-section");v.insertBefore(s,g)}(t.currentTarget.parentElement.dataset.col),n.value="",n.blur()}}))}const s=e=>{let t=[];return{header:e,tasks:t,removeTask:e=>{t.splice(e,1)}}},a=(e,t,n)=>({name:e,dueDate:t,desc:n});var o=[];const c=document.getElementsByClassName("add-section");document.querySelector("#add-task-dialog");for(var r=0;r<c.length;r++)n(c[r]);document.addEventListener("click",(e=>{var n=document.querySelector(".active");if(n&&n.parentElement!==e.target.parentElement&&!n.contains(e.target)&&(n.classList.remove("active"),n.style.opacity="0",n.parentElement.parentElement.classList.contains("task")?n.style.bottom="-"+(n.offsetHeight-t(.5)-15)+"px":n.style.bottom="-"+(n.offsetHeight-15)+"px",setTimeout((function(){n.style.visibility="hidden"}),300)),e.target.classList.contains("triple-dot")){var s=e.target.parentElement.querySelector(".drop-down");s.classList.add("active"),s.parentElement.parentElement.classList.contains("task")?s.style.bottom="-"+(s.offsetHeight-t(.5)-15)+"px":s.style.bottom="-"+(s.offsetHeight-15)+"px",s.style.visibility="visible",s.parentElement.parentElement.classList.contains("task")?s.style.bottom="-"+(s.offsetHeight-t(.5))+"px":s.style.bottom="-"+s.offsetHeight+"px",s.style.opacity="1"}}))})();