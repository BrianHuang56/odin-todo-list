(()=>{function e(e,o,s){const a=document.createElement("div");a.className="section",a.dataset.sec=o;const c=document.createElement("div"),i=document.createElement("img");i.src="images/dots-vertical.svg",i.style.width="20px",i.className="triple-dot";const d=document.createElement("div");d.className="drop-down";const u=document.createElement("div");u.textContent="Delete",u.addEventListener("click",(()=>{!function(e){const t=document.querySelector("#confirmation-dialog"),n=t.querySelector("#confirm-submit");t.showModal(),t.style.transform="scale(1)",n.addEventListener("click",(function o(){t.style.transform="scale(0.05)",setTimeout((()=>{t.close()}),200),setTimeout((()=>{}),150);const s=l[e].col,a=l[e].numPrev;l.splice(e,1),localStorage.sections=JSON.stringify(l);const r=document.querySelector("[data-sec="+CSS.escape(e)+"]");r.querySelector(".section-container").style.opacity="0",r.style.maxHeight="0px",r.style.fontSize="0px",setTimeout((()=>{r.remove(),function(e,t,n){const o=document.querySelectorAll("[data-sec]");for(var s=0;s<l.length;s++){var a=o[s];a.dataset.sec>e&&(a.dataset.sec-=1),l[a.dataset.sec].col===t&&l[a.dataset.sec].numPrev>n&&(l[a.dataset.sec].numPrev-=1)}localStorage.sections=JSON.stringify(l)}(e,s,a)}),400),n.removeEventListener("click",o)}))}(a.dataset.sec)})),d.appendChild(u),c.appendChild(i),c.appendChild(d),c.style.cursor="pointer";const m=document.createElement("div");m.className="section-container";const v=document.createElement("div"),y=document.createElement("div");y.className="section-header-text",y.textContent=e.header,y.addEventListener("click",(e=>{const t=document.createElement("input"),n=e.currentTarget;t.type="text";const o=n.textContent;t.value=o;const s=n.parentElement;function r(e){e.target!==t&&(s.insertBefore(n,t),t.remove(),document.removeEventListener("click",r))}s.insertBefore(t,n),n.remove(),t.select(),e.stopPropagation(),document.addEventListener("click",r),t.addEventListener("keypress",(e=>{"Enter"==e.code&&(l[a.dataset.sec].header=e.currentTarget.value,n.textContent=e.currentTarget.value,t.remove(),s.insertBefore(n,s.firstChild),document.removeEventListener("click",r))}))})),v.appendChild(y),v.className="section-header",v.appendChild(c),v.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),v.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),v.addEventListener("mousedown",(e=>{t(e,a,o)}));const p=document.createElement("div");p.className="tasks";const g=document.createElement("div");g.className="add-task",g.innerHTML='<img src="images/plus.svg" width="20px" height="20px">',g.addEventListener("click",(e=>{e.stopImmediatePropagation(),function(e){const t=document.querySelector("#task-dialog");t.querySelector(".dialog-header").childNodes[0].nodeValue="Add Task";const o=t.querySelector("#task-submit");o.textContent="Add Task";const s=t.querySelector("#task-name"),a=t.querySelector("#task-due"),c=t.querySelector("#task-desc"),i=t.querySelector("#task-prio"),d=t.querySelector("#task-status");s.value=null,a.value=null,c.value=null,i.value="",d.value="",t.showModal(),t.style.transform="scale(1)",o.addEventListener("click",(function u(m){if(s.validity.valueMissing)return s.setCustomValidity("Please fill out this field"),void s.addEventListener("input",(()=>{s.setCustomValidity("")}));if(""===i.value)return i.setCustomValidity("Please select a valid option"),void i.addEventListener("input",(()=>{i.setCustomValidity("")}));if(""===d.value)return d.setCustomValidity("Please select a valid option"),void d.addEventListener("input",(()=>{d.setCustomValidity("")}));const v=r(s.value,a.value,c.value,i.value,d.value);s.value=null,a.value=null,c.value=null,i.value="",d.value="",l[e].tasks.push(v),localStorage.sections=JSON.stringify(l),n(v,e),t.style.transform="scale(0.05)",setTimeout((()=>{t.close()}),200),o.removeEventListener("click",u),m.preventDefault()}))}(a.dataset.sec)}));const f=document.createElement("div");f.textContent="Add Task",f.style.fontSize="14px",g.appendChild(f),m.appendChild(v),p.appendChild(g),m.appendChild(p),a.appendChild(m);const S=document.querySelector("[data-col="+CSS.escape(e.col)+"]"),h=S.querySelector(s);S.insertBefore(a,h)}function t(e,t,n){if(sectionHeader=t.querySelector(".section-header"),!sectionHeader.contains(e.target)||sectionHeader===e.target){document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(s){document.documentElement.style.maxHeight=null,document.getElementById("placeholder").remove(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",o),-1!==m&&clearInterval(m);const a=s.clientX+i,r=s.clientY;sectionHeader.style.cursor="grab",t.classList.toggle("dragging"),t.style.position=null,t.style.transform=null,t.style.width=null,t.style.zIndex=null;const c=document.querySelectorAll("[data-col]"),d=c[0].getBoundingClientRect(),u=c[1].getBoundingClientRect(),v=c[2].getBoundingClientRect();var y,p=!1;const g=l[n].numPrev,f=l[n].col;if(a>d.left&&a<d.left+d.width?(y=c[0],"0"!==l[n].col&&(l[n].col="0",p=!0)):a>u.left&&a<u.left+u.width?(y=c[1],"1"!==l[n].col&&(l[n].col="1",p=!0)):a>v.left&&a<v.left+v.width&&(y=c[2],"2"!==l[n].col&&(l[n].col="2",p=!0)),void 0===y)return;if(p){const e=c[f].children;for(var S=0;S<e.length;S++)void 0!==(C=e[S].dataset.sec)&&(l[C].numPrev-=1)}const h=y.children;var E=!1;for(S=0;S<h.length;S++){var k=h[S].getBoundingClientRect(),L=h[S].clientHeight;if(k.y+L/2>=r&&!E)y.insertBefore(t,h[S]),"placeholder"===h[S].id?l[n].numPrev=S-1:(void 0!==h[S].dataset.sec&&(l[h[S].dataset.sec].numPrev+=1),l[n].numPrev=S),E=!0;else if(E){var C;void 0!==(C=h[S].dataset.sec)&&(p||l[C].numPrev<g)&&(l[C].numPrev+=1)}}if(!E){const e=y.querySelector(".add-section");l[n].numPrev=p?h.length-1:h.length-3,y.insertBefore(t,e)}localStorage.sections=JSON.stringify(l)})),sectionHeader.style.cursor="grabbing";const s=document.createElement("div");s.style.width=t.offsetWidth+"px",s.style.height=t.offsetHeight+"px",s.style.marginBottom="3rem",s.id="placeholder";const a=e.clientX,r=sectionHeader.getBoundingClientRect(),c=t.offsetWidth;t.classList.toggle("dragging"),t.style.position="fixed",t.parentElement.insertBefore(s,t.nextSibling),t.style.width=c+"px",t.style.zIndex="200";const i=r.left+r.width/2-a;let d=0,u=-document.documentElement.scrollTop,m=-1;function o(e){-1!==m&&(clearInterval(m),m=-1),e.preventDefault();var n=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;const o=document.documentElement;return 0===t&&e<0||Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1&&e>0?(clearInterval(m),void(m=-1)):void window.scrollTo(n,t+e)};d+=e.movementX,u+=e.movementY,t.style.transform=`translate(${d}px, ${u}px)`,e.clientY<50?m=setInterval((function(){n(-8)}),10):e.clientY>document.documentElement.clientHeight-t.clientHeight&&(m=setInterval((function(){n(8)}),10))}t.style.transform=`translate(${d}px, ${u}px)`}}function n(e,t){const n=l[t].tasks.length-1,s=document.createElement("div");s.className="task";const a=document.createElement("p"),r=document.createElement("span");switch(r.style.fontSize="12px",e.prio){case"0":r.innerHTML="Top Priority",r.style.color="Red",r.style.fontWeight="Bold";break;case"1":r.innerHTML="High Priority",r.style.color="Red";break;case"2":r.innerHTML="Mid Priority",r.style.color="royalblue";break;case"3":r.innerHTML="Low Priority",r.style.color="Green";break;case"4":r.innerHTML="No Priority",r.style.color="darkgreen"}a.className="task-text",e.dueDate?a.innerHTML=e.name+'<br><span class="date">'+e.dueDate+"</span><br>"+r.outerHTML:a.innerHTML=e.name+"<br>"+r.outerHTML,s.appendChild(a),s.dataset.task=n,s.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),s.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),s.addEventListener("click",(e=>{e.currentTarget.querySelector(".drop-container").contains(e.target)||o(t,n)}));const c=document.createElement("div");c.className="drop-container";const i=document.createElement("div");i.style.bottom="0px",i.className="drop-down";const d=document.createElement("div");d.textContent="Delete",i.dataset.task=n,d.addEventListener("click",(()=>{!function(e,t){const n=document.querySelector("#confirmation-dialog");n.showModal(),n.style.transform="scale(1)";const o=n.querySelector("#confirm-submit");o.addEventListener("click",(function s(){n.close(),setTimeout((()=>{}),150),l[e].tasks.splice(t,1);const a=document.querySelector("[data-sec="+CSS.escape(e)+"] > .section-container > .tasks > [data-task="+CSS.escape(t)+"]");a.children[0].style.display="none",a.style.maxHeight="0px",a.style.opacity="0",a.style.fontSize="0",a.style.padding="0",function(e,t){const n=document.querySelector("[data-sec="+CSS.escape(e)+"]").querySelectorAll("[data-task]");for(var o=0;o<n.length;o++){var s=n[o];s.dataset.task>t&&(s.dataset.task-=1)}localStorage.sections=JSON.stringify(l)}(e,t),setTimeout((function(){a.remove()}),300),o.removeEventListener("click",s)}))}(t,s.dataset.task)}));const u=document.createElement("img");u.src="images/dots-vertical.svg",u.style.width="20px",u.className="triple-dot",i.appendChild(d),c.appendChild(u),c.appendChild(i),s.appendChild(c);const m=document.querySelector("[data-sec="+CSS.escape(t)+"] > .section-container > .tasks"),v=m.querySelector(".add-task");"0"===e.status?s.style.backgroundColor="rgba(255, 0, 0, 0.2)":"1"===e.status?s.style.backgroundColor="rgba(255, 255, 0, 0.2)":"2"===e.status&&(s.style.backgroundColor="rgba(0, 255, 0, 0.2)"),m.insertBefore(s,v)}function o(e,t){const n=document.querySelector("#task-dialog");n.querySelector(".dialog-header").childNodes[0].nodeValue="Edit Task";const o=n.querySelector("#task-submit");o.textContent="Edit Task";const s=l[e].tasks[t],a=n.querySelector("#task-name"),c=n.querySelector("#task-due"),i=n.querySelector("#task-desc"),d=n.querySelector("#task-prio"),u=n.querySelector("#task-status");a.value=s.name,c.value=s.dueDate,i.value=s.desc,d.value=s.prio,u.value=s.status,n.showModal(),n.style.transform="scale(1)",o.addEventListener("click",(function s(m){if(a.validity.valueMissing)return a.setCustomValidity("Please fill out this field"),void a.addEventListener("input",(function(){a.setCustomValidity("")}));if(""===d.value)return d.setCustomValidity("Please select a valid option"),void d.addEventListener("input",(()=>{d.setCustomValidity("")}));if(""===u.value)return u.setCustomValidity("Please select a valid option"),void u.addEventListener("input",(()=>{u.setCustomValidity("")}));const v=r(a.value,c.value,i.value,d.value,u.value);l[e].tasks[t]=v,localStorage.sections=JSON.stringify(l);const y=document.querySelector("[data-sec="+CSS.escape(e)+"] > .section-container > .tasks > [data-task="+CSS.escape(t)+"]"),p=document.createElement("span");switch(p.style.fontSize="12px",v.prio){case"0":p.innerHTML="Top Priority",p.style.color="Red",p.style.fontWeight="Bold";break;case"1":p.innerHTML="High Priority",p.style.color="Red";break;case"2":p.innerHTML="Mid Priority",p.style.color="royalblue";break;case"3":p.innerHTML="Low Priority",p.style.color="Green";break;case"4":p.innerHTML="No Priority",p.style.color="Green"}n.style.transform="scale(0.05)",c.value?y.querySelector("p").innerHTML=a.value+'<br><span class="date">'+c.value+"</span><br>"+p.outerHTML:y.querySelector("p").innerHTML=a.value+"<br>"+p.outerHTML,"0"===v.status?y.style.backgroundColor="rgba(255, 0, 0, 0.2)":"1"===v.status?y.style.backgroundColor="rgba(255, 255, 0, 0.2)":"2"===v.status&&(y.style.backgroundColor="rgba(0, 255, 0, 0.2)"),o.removeEventListener("click",s),setTimeout((()=>{n.close()}),200),m.preventDefault()}))}function s(t){const n=t.querySelector(".new-section-input");t.addEventListener("click",(e=>{n.focus(),e.stopPropagation(),document.addEventListener("click",(()=>{n.value=""}))})),n.addEventListener("focusin",(()=>{t.style.opacity="1",t.style.cursor="text"})),n.addEventListener("focusout",(()=>{t.style.opacity="0.5",t.style.cursor="pointer"})),n.addEventListener("keydown",(t=>{if("Enter"===t.code&&""!==n.value){var o=t.currentTarget.parentElement.parentElement,s=a(n.value,o.dataset.col,o.children.length-1);l.push(s),localStorage.sections=JSON.stringify(l),e(s,l.length-1,".add-section"),n.value="",n.blur()}}))}const a=(e,t,n)=>({header:e,tasks:[],col:t,numPrev:n}),r=(e,t,n,o,s)=>({name:e,dueDate:t,desc:n,prio:o,status:s});var l=[];const c=document.getElementsByClassName("add-section"),i=document.querySelector("#task-dialog"),d=i.querySelector(".dialog-box"),u=document.querySelector("#confirmation-dialog"),m=document.querySelector("#header"),v=document.querySelector("#content"),y=document.querySelector("#footer");v.style.minHeight=document.documentElement.clientHeight-m.clientHeight-y.clientHeight-3*parseFloat(getComputedStyle(document.documentElement).fontSize)+"px",void 0!==localStorage.sections&&function(){l=JSON.parse(localStorage.sections),console.log(l);for(var t=0;t<l.length;t++){for(var o=l[t],s=document.querySelector("[data-col="+CSS.escape(o.col)+"]").children,a=0;a<s.length;a++){if(void 0===s[a].dataset.sec){e(o,t,".add-section");break}var r=s[a].dataset.sec;if(l[r].numPrev>o.numPrev){e(o,t,"[data-sec="+CSS.escape(r)+"]");break}}var c=o.tasks;for(a=0;a<c.length;a++)n(c[a],t)}}(),document.addEventListener("mousedown",(function(e){if(i.open&&!d.contains(e.target)){i.style.transform="scale(0.05)",setTimeout((()=>{i.close()}),200);const e=d.querySelector("#task-submit"),t=e.cloneNode(!0);e.parentElement.replaceChild(t,e)}})),u.querySelector("#confirm-cancel").addEventListener("click",(()=>{u.style.transform="scale(0.05)",setTimeout((()=>{u.close()}),200)})),d.querySelector("#task-cancel").addEventListener("click",(e=>{e.preventDefault();const t=i.querySelectorAll("input, textarea");for(var n=0;n<t.length;n++)t[n].value=null;i.style.transform="scale(0.05)",setTimeout((()=>{i.close()}),200)}));for(var p=0;p<c.length;p++)s(c[p]);document.addEventListener("click",(e=>{!function(e){var t=document.querySelector(".active");t&&t.parentElement!==e.target.parentElement&&!t.contains(e.target)&&(t.classList.remove("active"),t.style.opacity="0",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="0px":t.style.bottom="-"+(t.offsetHeight-15)+"px",setTimeout((function(){t.style.visibility="hidden"}),300))}(e),function(e){if(e.target.classList.contains("triple-dot")){var t=e.target.parentElement.querySelector(".drop-down");t.classList.add("active"),t.parentElement.parentElement.classList.contains("task")?t.style.bottom="0px":t.style.bottom="-"+(t.offsetHeight-15)+"px",t.style.visibility="visible",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-15px":t.style.bottom="-"+t.offsetHeight+"px",t.style.opacity="1"}}(e)}))})();