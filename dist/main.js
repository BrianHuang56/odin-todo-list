(()=>{function e(e,t){if(sectionHeader=t.querySelector(".section-header"),!sectionHeader.contains(e.target)||sectionHeader===e.target){document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(s){document.documentElement.style.maxHeight=null,document.getElementById("placeholder").remove(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",o),document.removeEventListener("scroll",n),-1!==m&&clearInterval(m);const a=s.clientX+r,l=s.clientY;sectionHeader.style.cursor="grab",t.classList.toggle("dragging"),t.style.position=null,t.style.transform=null,t.style.width=null,t.style.zIndex=null;const c=document.querySelectorAll("[data-col]"),i=c[0].getBoundingClientRect(),d=c[1].getBoundingClientRect(),u=c[2].getBoundingClientRect();var v;if(a>i.left&&a<i.left+i.width?v=c[0]:a>d.left&&a<d.left+d.width?v=c[1]:a>u.left&&a<u.left+u.width&&(v=c[2]),void 0===v)return;const p=v.children;for(var y=0;y<p.length;y++)if(p[y].getBoundingClientRect().y>=l)return void v.insertBefore(t,p[y]);const g=v.querySelector(".add-section");v.insertBefore(t,g)})),document.addEventListener("scroll",n),sectionHeader.style.cursor="grabbing";const s=document.createElement("div");s.style.width=t.offsetWidth+"px",s.style.height=t.offsetHeight+"px",s.style.marginBottom="3rem",s.id="placeholder";const a=e.clientX,l=sectionHeader.getBoundingClientRect(),c=t.offsetWidth;t.classList.toggle("dragging"),t.style.position="fixed",t.parentElement.insertBefore(s,t.nextSibling),t.style.width=c+"px",t.style.zIndex="200";const r=l.left+l.width/2-a;let i=0,d=0,u=document.documentElement.scrollTop,m=-1;function n(){d+=document.documentElement.scrollTop-u,u=document.documentElement.scrollTop,t.style.transform=`translate(${i}px, ${d}px)`}function o(e){-1!==m&&(clearInterval(m),m=-1),e.preventDefault();var n=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;const o=document.documentElement;return 0===t&&e<0||Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1&&e>0?(clearInterval(m),void(m=-1)):void window.scrollTo(n,t+e)};i+=e.movementX,d+=e.movementY,t.style.transform=`translate(${i}px, ${d}px)`,e.clientY<50?m=setInterval((function(){n(-8)}),10):e.clientY>document.documentElement.clientHeight-t.clientHeight&&(m=setInterval((function(){n(8)}),10))}}}function t(e,t){const n=document.querySelector("#task-dialog");n.querySelector(".dialog-header").childNodes[0].nodeValue="Edit Task";const o=n.querySelector("#task-submit");o.textContent="Edit Task";const s=l[e].tasks[t],c=n.querySelector("#task-name"),r=n.querySelector("#task-due"),i=n.querySelector("#task-desc"),d=n.querySelector("#task-prio"),u=n.querySelector("#task-status");c.value=s.name,r.value=s.dueDate,i.value=s.desc,d.value=s.prio,u.value=s.status,n.showModal(),o.addEventListener("click",(function s(m){if(c.validity.valueMissing)return c.setCustomValidity("Please fill out this field"),void c.addEventListener("input",(function(){c.setCustomValidity("")}));if(""===d.value)return d.setCustomValidity("Please select a valid option"),void d.addEventListener("input",(()=>{d.setCustomValidity("")}));if(""===u.value)return u.setCustomValidity("Please select a valid option"),void u.addEventListener("input",(()=>{u.setCustomValidity("")}));const v=a(c.value,r.value,i.value,d.value,u.value);l[e].tasks[t]=v;const p=document.querySelector("[data-sec="+CSS.escape(e)+"] > .section-container > [data-task="+CSS.escape(t)+"]");r.value?p.querySelector("p").innerHTML=c.value+'<br><span class="date">'+r.value+"</span>":p.querySelector("p").innerHTML=c.value,"0"===v.status?p.style.backgroundColor="rgba(255, 0, 0, 0.2)":"1"===v.status?p.style.backgroundColor="rgba(255, 255, 0, 0.2)":"2"===v.status&&(p.style.backgroundColor="rgba(0, 255, 0, 0.2)"),o.removeEventListener("click",s),n.close(),m.preventDefault()}))}function n(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}function o(n){const o=n.querySelector(".new-section-input");n.addEventListener("click",(e=>{o.focus(),e.stopPropagation(),document.addEventListener("click",(()=>{o.value=""}))})),o.addEventListener("focusin",(()=>{n.style.opacity="1",n.style.cursor="text"})),o.addEventListener("focusout",(()=>{n.style.opacity="0.5",n.style.cursor="pointer"})),o.addEventListener("keydown",(n=>{if("Enter"===n.code&&""!==o.value){var c=s(o.value);l.push(c),function(n){const o=l.length-1,s=document.createElement("div");s.className="section",s.dataset.sec=o;const c=document.createElement("div"),r=document.createElement("img");r.src="../images/dots-vertical.svg",r.style.width="20px",r.className="triple-dot";const i=document.createElement("div");i.className="drop-down";const d=document.createElement("div");d.textContent="Delete",d.addEventListener("click",(()=>{!function(e){const t=document.querySelector("#confirmation-dialog");t.showModal();const n=t.querySelector("#confirm-submit");n.addEventListener("click",(function o(){t.close(),setTimeout((()=>{}),150),l.splice(e,1);const s=document.querySelector("[data-sec="+CSS.escape(e)+"]");s.querySelector(".section-container").style.opacity="0",s.style.maxHeight="0px",s.style.fontSize="0px",function(e){const t=document.querySelectorAll("[data-sec]");for(var n=0;n<t.length;n++){var o=t[n];o.dataset.sec>e&&(o.dataset.sec-=1)}}(e),setTimeout((function(){s.remove()}),400),n.removeEventListener("click",o)}))}(s.dataset.sec)})),i.appendChild(d),c.appendChild(r),c.appendChild(i),c.style.cursor="pointer";const u=document.createElement("div");u.className="section-container";const m=document.createElement("div"),v=document.createElement("div");v.className="section-header-text",v.textContent=l[o].header,v.addEventListener("click",(e=>{const t=document.createElement("input"),n=e.currentTarget;t.type="text";const o=n.textContent;t.value=o;const a=n.parentElement;function c(e){e.target!==t&&(a.insertBefore(n,t),t.remove(),document.removeEventListener("click",c))}a.insertBefore(t,n),n.remove(),t.select(),e.stopPropagation(),document.addEventListener("click",c),t.addEventListener("keypress",(e=>{"Enter"==e.code&&(l[s.dataset.sec].header=e.currentTarget.value,n.textContent=e.currentTarget.value,t.remove(),a.insertBefore(n,a.firstChild),document.removeEventListener("click",c))}))})),m.appendChild(v),m.className="section-header",m.appendChild(c),m.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),m.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),m.addEventListener("mousedown",(t=>{e(t,s)}));const p=document.createElement("div");p.className="add-task",p.innerHTML='<img src="../images/plus.svg" width="20px" height="20px">',p.addEventListener("click",(()=>{!function(e){const n=document.querySelector("#task-dialog");n.querySelector(".dialog-header").childNodes[0].nodeValue="Add Task";const o=n.querySelector("#task-submit");o.textContent="Add Task";const s=n.querySelector("#task-name"),c=n.querySelector("#task-due"),r=n.querySelector("#task-desc"),i=n.querySelector("#task-prio"),d=n.querySelector("#task-status");s.value=null,c.value=null,r.value=null,i.value="",d.value="",n.showModal(),o.addEventListener("click",(function u(m){if(s.validity.valueMissing)return s.setCustomValidity("Please fill out this field"),void s.addEventListener("input",(()=>{s.setCustomValidity("")}));if(""===i.value)return i.setCustomValidity("Please select a valid option"),void i.addEventListener("input",(()=>{i.setCustomValidity("")}));if(""===d.value)return d.setCustomValidity("Please select a valid option"),void d.addEventListener("input",(()=>{d.setCustomValidity("")}));const v=a(s.value,c.value,r.value,i.value,d.value);s.value=null,c.value=null,r.value=null,i.value="",d.value="",l[e].tasks.push(v),function(e,n){const o=l[n].tasks.length-1,s=document.createElement("div");s.className="task";const a=document.createElement("p");a.className="task-text",e.dueDate?a.innerHTML=e.name+'<br><span class="date">'+e.dueDate+"</span>":a.innerHTML=e.name,s.appendChild(a),s.dataset.task=o,s.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),s.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),s.addEventListener("click",(e=>{e.target===e.currentTarget&&t(n,o)}));const c=document.createElement("div"),r=document.createElement("div");r.className="drop-down";const i=document.createElement("div");i.textContent="Delete",r.dataset.task=o,i.addEventListener("click",(()=>{!function(e,t){const n=document.querySelector("#confirmation-dialog");n.showModal();const o=n.querySelector("#confirm-submit");o.addEventListener("click",(function s(){n.close(),setTimeout((()=>{}),150),l[e].tasks.splice(t,1);const a=document.querySelector("[data-sec="+CSS.escape(e)+"] > .section-container > [data-task="+CSS.escape(t)+"]");a.children[0].style.display="none",a.style.maxHeight="0px",a.style.opacity="0",a.style.fontSize="0",a.style.padding="0",function(e,t){const n=document.querySelector("[data-sec="+CSS.escape(e)+"]").querySelectorAll("[data-task]");for(var o=0;o<n.length;o++){var s=n[o];s.dataset.task>t&&(s.dataset.task-=1)}}(e,t),setTimeout((function(){a.remove()}),300),o.removeEventListener("click",s)}))}(n,s.dataset.task)}));const d=document.createElement("img");d.src="../images/dots-vertical.svg",d.style.width="20px",d.className="triple-dot",r.appendChild(i),c.appendChild(d),c.appendChild(r),s.appendChild(c);const u=document.querySelector("[data-sec="+CSS.escape(n)+"] > .section-container"),m=u.querySelector(".add-task");"0"===e.status?s.style.backgroundColor="rgba(255, 0, 0, 0.2)":"1"===e.status?s.style.backgroundColor="rgba(255, 255, 0, 0.2)":"2"===e.status&&(s.style.backgroundColor="rgba(0, 255, 0, 0.2)"),u.insertBefore(s,m)}(v,e),n.close(),o.removeEventListener("click",u),m.preventDefault()}))}(s.dataset.sec)}));const y=document.createElement("div");y.textContent="Add Task",y.style.fontSize="14px",p.appendChild(y),u.appendChild(m),u.appendChild(p),s.appendChild(u);const g=document.querySelector("[data-col="+CSS.escape(n)+"]"),f=g.querySelector(".add-section");g.insertBefore(s,f)}(n.currentTarget.parentElement.parentElement.dataset.col),o.value="",o.blur()}}))}const s=e=>({header:e,tasks:[]}),a=(e,t,n,o,s)=>({name:e,dueDate:t,desc:n,prio:o,status:s});var l=[];const c=document.getElementsByClassName("add-section"),r=document.querySelector("#task-dialog"),i=r.querySelector(".dialog-box"),d=document.querySelector("#confirmation-dialog"),u=document.querySelector("#header"),m=document.querySelector("#content"),v=document.querySelector("#footer");m.style.minHeight=document.documentElement.clientHeight-u.clientHeight-v.clientHeight-n(3)+"px",document.addEventListener("mousedown",(function(e){i.contains(e.target)||r.close()})),d.querySelector("#confirm-cancel").addEventListener("click",(()=>{d.close()})),i.querySelector("#task-cancel").addEventListener("click",(e=>{e.preventDefault();const t=r.querySelectorAll("input, textarea");for(var n=0;n<t.length;n++)t[n].value=null;r.close()}));for(var p=0;p<c.length;p++)o(c[p]);document.addEventListener("click",(e=>{!function(e){var t=document.querySelector(".active");t&&t.parentElement!==e.target.parentElement&&!t.contains(e.target)&&(t.classList.remove("active"),t.style.opacity="0",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5)-15)+"px":t.style.bottom="-"+(t.offsetHeight-15)+"px",setTimeout((function(){t.style.visibility="hidden"}),300))}(e),function(e){if(e.target.classList.contains("triple-dot")){var t=e.target.parentElement.querySelector(".drop-down");t.classList.add("active"),t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5)-15)+"px":t.style.bottom="-"+(t.offsetHeight-15)+"px",t.style.visibility="visible",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5))+"px":t.style.bottom="-"+t.offsetHeight+"px",t.style.opacity="1"}}(e)}))})();