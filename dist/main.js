(()=>{function e(e,t){if(sectionHeader=t.querySelector(".section-header"),!sectionHeader.contains(e.target)||sectionHeader===e.target){document.addEventListener("mousemove",n),document.addEventListener("mouseup",(function e(o){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",n),r=document.elementsFromPoint(o.clientX,o.clientY);for(var a=0;a<r.length;a++){if("section"===(i=r[a]).className){var c=i.parentElement;return o.clientY>s?c.insertBefore(t,i.nextSibling):c.insertBefore(t,i),t.style.transform=null,void t.classList.toggle("dragging")}if("add-section"===i.className)return(c=i.parentElement).insertBefore(t,i),t.style.transform=null,void t.classList.toggle("dragging")}var r=document.elementsFromPoint(o.clientX,o.clientY-25);for(a=0;a<r.length;a++)if("section"===(i=r[a]).className)return(c=i.parentElement).insertBefore(t,i.nextSibling),t.style.transform=null,void t.classList.toggle("dragging");for(r=document.elementsFromPoint(o.clientX,o.clientY+25),a=0;a<r.length;a++)if("section"===(i=r[a]).className||"add-section"===i.className)return(c=i.parentElement).insertBefore(t,i),t.style.transform=null,void t.classList.toggle("dragging");for(r=document.elementsFromPoint(o.clientX,o.clientY),a=0;a<r.length;a++){var i;"col"!==(i=r[a]).className||i.contains(t)||i.insertBefore(t,i.querySelector(".add-section"))}t.style.transform=null,t.classList.toggle("dragging")}));const s=e.clientY;let o=0,a=0;function n(e){t.classList.toggle("dragging"),e.preventDefault(),o+=e.movementX,a+=e.movementY,t.style.transform=`translate(${o}px, ${a}px)`}}}function t(e,t){c[t].removeTask(e);const n=document.querySelector("[data-sec="+CSS.escape(t)+"][data-task="+CSS.escape(taskNumber)+"]");n.children[0].style.display="none",n.style.maxHeight="0px",n.style.opacity="0",n.style.fontSize="0",n.style.padding="0",setTimeout((function(){n.remove()}),300)}function n(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}function s(n){const s=n.querySelector(".new-section-input");n.addEventListener("click",(()=>{s.focus()})),s.addEventListener("focusin",(()=>{n.style.opacity="1",n.style.cursor="text"})),s.addEventListener("focusout",(()=>{n.style.opacity="0.5",n.style.cursor="pointer"})),s.addEventListener("keydown",(n=>{if("Enter"===n.code&&""!==s.value){var r=o(s.value);c.push(r),function(n){const s=c.length-1,o=document.createElement("div");o.className="section",o.dataset.sec=s;const r=document.createElement("div"),i=document.createElement("img");i.src="../images/dots-vertical.svg",i.style.width="20px",i.className="triple-dot";const l=document.createElement("div");l.className="drop-down",l.dataset.sec=s;const d=document.createElement("div");d.textContent="Delete",d.addEventListener("click",(()=>{!function(e){c.splice(e,1);const t=document.querySelector("[data-sec="+CSS.escape(e)+"]");t.querySelector(".section-container").style.opacity="0",t.style.maxHeight="0px",t.style.fontSize="0px",setTimeout((function(){t.remove()}),400)}(s)})),l.appendChild(d),r.appendChild(i),r.appendChild(l),r.style.cursor="pointer";const m=document.createElement("div");m.className="section-container",m.dataset.sec=c.length-1;const u=document.createElement("div");u.textContent=c[s].header,u.className="section-header",u.appendChild(r),u.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),u.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),u.addEventListener("mousedown",(t=>{e(t,o)}));const p=document.createElement("div");p.className="add-task",p.innerHTML='<img src="../images/plus.svg" width="20px" height="20px">',p.addEventListener("click",(()=>{!function(e){const n=document.querySelector("#add-task-dialog");n.showModal(),document.addEventListener("keydown",(function s(o){if("Enter"===o.code){const o=n.querySelector("#task-name"),r=n.querySelector("#task-due"),i=n.querySelector("#task-desc");if(!o.value)return;const l=a(o.value,r.value,i.value);o.value=null,r.value=null,i.value=null,c[e].tasks.push(l),function(e,n){const s=c[n].tasks.length-1,o=document.createElement("div");o.className="task",o.textContent=e.name,o.dataset.sec=n,o.dataset.task=s,o.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),o.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"}));const a=document.createElement("div"),r=document.createElement("div");r.className="drop-down";const i=document.createElement("div");i.textContent="Delete",r.dataset.sec=n,r.dataset.task=s,i.addEventListener("click",(()=>{t(e,n)}));const l=document.createElement("img");l.src="../images/dots-vertical.svg",l.style.width="20px",l.className="triple-dot",r.appendChild(i),a.appendChild(l),a.appendChild(r),o.appendChild(a);const d=document.querySelector("[data-sec="+CSS.escape(n)+"] .section-container"),m=d.querySelector(".add-task");d.insertBefore(o,m)}(l,e),n.close(),document.removeEventListener("keydown",s)}}))}(s)}));const v=document.createElement("div");v.textContent="Add Task",v.style.fontSize="14px",p.appendChild(v),m.appendChild(u),m.appendChild(p),o.appendChild(m);const g=document.querySelector("[data-col="+CSS.escape(n)+"]"),y=g.querySelector(".add-section");g.insertBefore(o,y)}(n.currentTarget.parentElement.dataset.col),s.value="",s.blur()}}))}const o=e=>{let t=[];return{header:e,tasks:t,removeTask:e=>{t.splice(e,1)}}},a=(e,t,n)=>({name:e,dueDate:t,desc:n});var c=[];const r=document.getElementsByClassName("add-section");document.querySelector("#add-task-dialog");for(var i=0;i<r.length;i++)s(r[i]);document.addEventListener("click",(e=>{!function(e){var t=document.querySelector(".active");t&&t.parentElement!==e.target.parentElement&&!t.contains(e.target)&&(t.classList.remove("active"),t.style.opacity="0",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5)-15)+"px":t.style.bottom="-"+(t.offsetHeight-15)+"px",setTimeout((function(){t.style.visibility="hidden"}),300))}(e),function(e){if(e.target.classList.contains("triple-dot")){var t=e.target.parentElement.querySelector(".drop-down");t.classList.add("active"),t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5)-15)+"px":t.style.bottom="-"+(t.offsetHeight-15)+"px",t.style.visibility="visible",t.parentElement.parentElement.classList.contains("task")?t.style.bottom="-"+(t.offsetHeight-n(.5))+"px":t.style.bottom="-"+t.offsetHeight+"px",t.style.opacity="1"}}(e)}))})();