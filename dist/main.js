(()=>{function e(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}function t(e){const t=e.querySelector(".new-section-input");e.addEventListener("click",(()=>{t.focus()})),t.addEventListener("focusin",(()=>{e.style.opacity="1",e.style.cursor="text"})),t.addEventListener("focusout",(()=>{e.style.opacity="0.5",e.style.cursor="pointer"})),t.addEventListener("keydown",(e=>{if("Enter"===e.code&&""!==t.value){var o=n(t.value);a.push(o),function(e){const t=a.length-1,n=document.createElement("div");n.className="section",n.dataset.sec=t;const o=document.createElement("div"),c=document.createElement("img");c.src="../images/dots-vertical.svg",c.style.width="20px",c.className="triple-dot";const r=document.createElement("div");r.className="drop-down",r.dataset.sec=t;const i=document.createElement("div");i.textContent="Delete",i.addEventListener("click",(()=>{a.splice(t,1);const e=document.querySelector("[data-sec="+CSS.escape(t)+"]");e.querySelector(".section-container").style.opacity="0",e.style.maxHeight="0px",e.style.fontSize="0px",setTimeout((function(){e.remove()}),400)})),r.appendChild(i),o.appendChild(c),o.appendChild(r),o.style.cursor="pointer";const l=document.createElement("div");l.className="section-container",l.dataset.sec=a.length-1;const d=document.createElement("div");d.textContent=a[t].header,d.className="section-header",d.appendChild(o),d.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),d.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"})),d.addEventListener("mousedown",(e=>{if(!d.contains(e.target)||d===e.target){document.addEventListener("mousemove",t),document.addEventListener("mouseup",(function e(a){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",t),r=document.elementsFromPoint(a.clientX,a.clientY),console.log(r);for(var o=0;o<r.length;o++){if("section"===(i=r[o]).className){var c=i.parentElement;return a.clientY>s?c.insertBefore(n,i.nextSibling):c.insertBefore(n,i),n.style.transform=null,void n.classList.toggle("dragging")}if("add-section"===i.className)return(c=i.parentElement).insertBefore(n,i),n.style.transform=null,void n.classList.toggle("dragging")}var r=document.elementsFromPoint(a.clientX,a.clientY-25);for(o=0;o<r.length;o++)if("section"===(i=r[o]).className)return(c=i.parentElement).insertBefore(n,i.nextSibling),n.style.transform=null,void n.classList.toggle("dragging");for(r=document.elementsFromPoint(a.clientX,a.clientY+25),o=0;o<r.length;o++)if("section"===(i=r[o]).className||"add-section"===i.className)return(c=i.parentElement).insertBefore(n,i),n.style.transform=null,void n.classList.toggle("dragging");for(r=document.elementsFromPoint(a.clientX,a.clientY),o=0;o<r.length;o++){var i;"col"!==(i=r[o]).className||i.contains(n)||i.insertBefore(n,i.querySelector(".add-section"))}n.style.transform=null,n.classList.toggle("dragging")})),e.clientX;const s=e.clientY;let a=0,o=0;function t(e){n.classList.toggle("dragging"),e.preventDefault(),a+=e.movementX,o+=e.movementY,n.style.transform=`translate(${a}px, ${o}px)`}}}));const m=document.createElement("div");m.className="add-task",m.innerHTML='<img src="../images/plus.svg" width="20px" height="20px">';const u=document.createElement("input");u.placeholder="Add Task",u.type="text",u.addEventListener("focusin",(e=>{e.currentTarget.parentElement.style.opacity="1"})),u.addEventListener("focusout",(e=>{e.currentTarget.parentElement.style.opacity="0.5"})),u.addEventListener("keydown",(e=>{if("Enter"===e.code){const n=e.currentTarget;if(""!==n.value){const e=s(n.value);a[t].tasks.push(e),function(e,t){const n=a[t].tasks.length-1,s=document.createElement("div");s.className="task",s.textContent=e.name,s.dataset.sec=t,s.dataset.task=n,s.addEventListener("mouseenter",(e=>{e.currentTarget.querySelector("img").style.opacity="1"})),s.addEventListener("mouseleave",(e=>{e.currentTarget.querySelector("img").style.opacity="0"}));const o=document.createElement("div"),c=document.createElement("div");c.className="drop-down";const r=document.createElement("div");r.textContent="Delete",c.dataset.sec=t,c.dataset.task=n,r.addEventListener("click",(()=>{a[t].removeTask(e);var s=document.querySelector("[data-sec="+CSS.escape(t)+"][data-task="+CSS.escape(n)+"]");s.children[0].style.display="none",s.style.maxHeight="0px",s.style.opacity="0",s.style.fontSize="0",s.style.padding="0",setTimeout((function(){s.remove()}),300)}));const i=document.createElement("img");i.src="../images/dots-vertical.svg",i.style.width="20px",i.className="triple-dot",c.appendChild(r),o.appendChild(i),o.appendChild(c),s.appendChild(o);const l=document.querySelector("[data-sec="+CSS.escape(t)+"] .section-container"),d=l.querySelector(".add-task");l.insertBefore(s,d)}(e,t),n.value="",n.blur()}}})),m.appendChild(u),l.appendChild(d),l.appendChild(m),n.appendChild(l);const p=document.querySelector("[data-col="+CSS.escape(e)+"]"),g=p.querySelector(".add-section");p.insertBefore(n,g)}(e.currentTarget.parentElement.dataset.col),t.value="",t.blur()}}))}const n=e=>{let t=[];return{header:e,tasks:t,removeTask:e=>{t.splice(e,1)}}},s=e=>({name:e,dueDate:undefined,desc:""});var a=[];const o=document.getElementsByClassName("add-section");for(var c=0;c<o.length;c++)t(o[c]);document.addEventListener("click",(e=>{console.log(e.clientX+" "+e.clientY)})),document.addEventListener("click",(t=>{var n=document.querySelector(".active");if(n&&n.parentElement!==t.target.parentElement&&!n.contains(t.target)&&(n.classList.remove("active"),n.style.opacity="0",n.parentElement.parentElement.classList.contains("task")?n.style.bottom="-"+(n.offsetHeight-e(.5)-15)+"px":n.style.bottom="-"+(n.offsetHeight-15)+"px",setTimeout((function(){n.style.visibility="hidden"}),300)),t.target.classList.contains("triple-dot")){var s=t.target.parentElement.querySelector(".drop-down");s.classList.add("active"),s.parentElement.parentElement.classList.contains("task")?s.style.bottom="-"+(s.offsetHeight-e(.5)-15)+"px":s.style.bottom="-"+(s.offsetHeight-15)+"px",s.style.visibility="visible",s.parentElement.parentElement.classList.contains("task")?s.style.bottom="-"+(s.offsetHeight-e(.5))+"px":s.style.bottom="-"+s.offsetHeight+"px",s.style.opacity="1"}}))})();